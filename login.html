<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <link rel="stylesheet" href="login.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Welcome</h1>
        <br />
        <p style="font-size: 17px">
          " Manage your tasks and daily workflow in one place! "
        </p>
      </div>

      <div class="tab-buttons">
        <button class="tab-btn active" onclick="showForm('signin')">
          Sign In
        </button>
        <button class="tab-btn" onclick="showForm('signup')">Sign Up</button>
      </div>

      <div class="success" id="successMsg"></div>

      <!-- Sign In Form -->
      <div class="form-container active" id="signin-form">
        <form onsubmit="handleSignIn(event)">
          <div class="form-group">
            <label for="signin-email">Email</label>
            <input
              type="email"
              id="signin-email"
              placeholder="Enter your email"
              required
            />
            <div class="error" id="signin-email-error"></div>
          </div>
          <div class="form-group">
            <label for="signin-password">Password</label>
            <input
              type="password"
              id="signin-password"
              placeholder="Enter your password"
              required
            />
            <div class="error" id="signin-password-error"></div>
          </div>
          <!-- <div class="forgot-password">
            <a href="#">Forgot Password?</a>
          </div> -->
          <button type="submit" class="submit-btn">Sign In</button>
        </form>
      </div>

      <!-- Sign Up Form -->
      <div class="form-container" id="signup-form">
        <form onsubmit="handleSignUp(event)">
          <div class="form-group">
            <label for="signup-fullname">Full Name</label>
            <input
              type="text"
              id="signup-fullname"
              placeholder="Enter your full name"
              required
            />
            <div class="error" id="signup-fullname-error"></div>
          </div>
          <div class="form-group">
            <label for="signup-email">Email</label>
            <input
              type="email"
              id="signup-email"
              placeholder="Enter your email"
              required
            />
            <div class="error" id="signup-email-error"></div>
          </div>
          <div class="form-group">
            <label for="signup-password">Password</label>
            <input
              type="password"
              id="signup-password"
              placeholder="Create a password"
              required
            />
            <div class="error" id="signup-password-error"></div>
          </div>
          <div class="form-group">
            <label for="signup-confirm-password">Confirm Password</label>
            <input
              type="password"
              id="signup-confirm-password"
              placeholder="Confirm your password"
              required
            />
            <div class="error" id="signup-confirm-error"></div>
          </div>
          <button type="submit" class="submit-btn">Sign Up</button>
        </form>
      </div>
    </div>

    <script>
      // Store user data in memory
      const users = {};

      function showForm(formType) {
        const signinForm = document.getElementById("signin-form");
        const signupForm = document.getElementById("signup-form");
        const tabs = document.querySelectorAll(".tab-btn");

        // Hide success message when switching tabs
        document.getElementById("successMsg").style.display = "none";

        if (formType === "signin") {
          signinForm.classList.add("active");
          signupForm.classList.remove("active");
          tabs[0].classList.add("active");
          tabs[1].classList.remove("active");
        } else {
          signupForm.classList.add("active");
          signinForm.classList.remove("active");
          tabs[1].classList.add("active");
          tabs[0].classList.remove("active");
        }
      }

      function showError(fieldId, message) {
        const errorEl = document.getElementById(fieldId + "-error");
        errorEl.textContent = message;
        errorEl.style.display = "block";
      }

      function clearErrors() {
        const errors = document.querySelectorAll(".error");
        errors.forEach((error) => (error.style.display = "none"));
      }

      function showSuccess(message) {
        const successEl = document.getElementById("successMsg");
        successEl.textContent = message;
        successEl.style.display = "block";
        setTimeout(() => {
          successEl.style.display = "none";
        }, 3000);
      }

      function handleSignUp(e) {
        e.preventDefault();
        clearErrors();

        const fullname = document.getElementById("signup-fullname").value;
        const email = document.getElementById("signup-email").value;
        const password = document.getElementById("signup-password").value;
        const confirmPassword = document.getElementById(
          "signup-confirm-password",
        ).value;

        // Validation
        if (fullname.trim().length < 2) {
          showError(
            "signup-fullname",
            "Full name must be at least 2 characters",
          );
          return;
        }

        if (password.length < 6) {
          showError(
            "signup-password",
            "Password must be at least 6 characters",
          );
          return;
        }

        if (password !== confirmPassword) {
          showError("signup-confirm", "Passwords do not match");
          return;
        }

        if (users[email]) {
          showError("signup-email", "Email already registered");
          return;
        }

        // Store user
        users[email] = { fullname, password };

        showSuccess("Account created successfully! You can now sign in.");

        // Reset form
        e.target.reset();

        // Switch to sign in after 1.5 seconds
        setTimeout(() => showForm("signin"), 1500);
      }

      function handleSignIn(e) {
        e.preventDefault();
        clearErrors();

        const email = document.getElementById("signin-email").value;
        const password = document.getElementById("signin-password").value;

        if (!users[email]) {
          showError("signin-email", "Email not found. Please sign up first.");
          return;
        }

        if (users[email].password !== password) {
          showError("signin-password", "Incorrect password");
          return;
        }

        showSuccess("Welcome back, " + users[email].fullname + "!");
        e.target.reset();
      }
    </script>
  </body>
</html>
